# استفاده از نسخه سبک و پایدار Node.js 18
FROM node:18-slim

# تنظیم پوشه کاری داخل کانتینر
WORKDIR /app

# کپی کردن فایل‌های مربوط به پکیج‌ها (برای استفاده بهینه از کش داکر)
# این کار باعث می‌شود اگر فقط کد را تغییر دادید، نصب پکیج‌ها دوباره انجام نشود
COPY package*.json ./

# نصب پکیج‌های ضروری (فقط نسخه‌های پروداکشن)
RUN npm install --production

# کپی کردن بقیه فایل‌های پروژه (مثل index.js) به داخل کانتینر
COPY . .

# --- تنظیمات مخصوص Hugging Face Spaces ---
# هاگینگ فیس انتظار دارد برنامه روی پورت 7860 اجرا شود
# ما این متغیر محیطی را ست می‌کنیم تا کد index.js آن را بخواند
ENV PORT=7860

# باز کردن پورت 7860 برای دسترسی بیرونی
EXPOSE 7860

# دستور اجرای برنامه
CMD ["npm", "start"]